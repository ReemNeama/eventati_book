# Authentication Component Diagram

This document provides a detailed breakdown of the authentication components in the Eventati Book application.

## Authentication Components Overview

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       AUTHENTICATION SYSTEM                             │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                ┌───────────────────┼───────────────────┐
                │                   │                   │
                ▼                   ▼                   ▼
┌───────────────────────┐ ┌───────────────────┐ ┌───────────────────────┐
│     UI COMPONENTS     │ │  STATE MANAGEMENT │ │     DATA LAYER        │
│                       │ │                   │ │                        │
│  ┌─────────────────┐  │ │ ┌─────────────┐   │ │  ┌─────────────────┐  │
│  │ AuthScreen      │  │ │ │AuthProvider │   │ │  │ User Model      │  │
│  └────────┬────────┘  │ │ └──────┬──────┘   │ │  └────────┬────────┘  │
│           │           │ │        │          │ │           │           │
│  ┌────────▼────────┐  │ │        │          │ │  ┌────────▼────────┐  │
│  │ LoginScreen     │──┼─┼────────┼──────────┼─┼──┤ TempDB/Supabase │  │
│  └────────┬────────┘  │ │        │          │ │  └────────┬────────┘  │
│           │           │ │        │          │ │           │           │
│  ┌────────▼────────┐  │ │        │          │ │           │           │
│  │ RegisterScreen  │──┼─┼────────┼──────────┼─┼───────────┘           │
│  └────────┬────────┘  │ │        │          │ │                        │
│           │           │ │        │          │ │                        │
│  ┌────────▼────────┐  │ │        │          │ │                        │
│  │ ForgetPassword  │──┼─┼────────┘          │ │                        │
│  └────────┬────────┘  │ │                   │ │                        │
│           │           │ │                   │ │                        │
│  ┌────────▼────────┐  │ │                   │ │                        │
│  │ ResetPassword   │  │ │                   │ │                        │
│  └────────┬────────┘  │ │                   │ │                        │
│           │           │ │                   │ │                        │
│  ┌────────▼────────┐  │ │                   │ │                        │
│  │ Verification    │  │ │                   │ │                        │
│  └─────────────────┘  │ │                   │ │                        │
│                       │ │                   │ │                        │
└───────────────────────┘ └───────────────────┘ └───────────────────────┘
```

## Authentication UI Components

### AuthScreen
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           AUTH SCREEN                                   │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           HEADER                                        │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  App Logo                                                       │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           TAB SELECTOR                                  │
│                                                                         │
│  ┌─────────────┐  ┌─────────────┐                                       │
│  │  Login      │  │  Register   │                                       │
│  │  (Selected) │  │             │                                       │
│  └─────────────┘  └─────────────┘                                       │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           CONTENT AREA                                  │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  LoginScreen or RegisterScreen based on selected tab            │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

### LoginScreen
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           LOGIN SCREEN                                  │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           TITLE                                         │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Welcome Back                                                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           FORM FIELDS                                   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Email TextField                                                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Password TextField (with show/hide toggle)                     │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Forgot Password Link                                           │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           ACTION BUTTONS                                │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Login Button                                                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Social Login Options (Google, Facebook, etc.)                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

### RegisterScreen
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           REGISTER SCREEN                               │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           TITLE                                         │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Create Account                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           FORM FIELDS                                   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Name TextField                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Email TextField                                                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Password TextField (with show/hide toggle)                     │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Confirm Password TextField                                     │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Terms and Conditions Checkbox                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           ACTION BUTTONS                                │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Register Button                                                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Social Registration Options (Google, Facebook, etc.)           │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

## Authentication State Management

### AuthProvider
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           AUTH PROVIDER                                 │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           STATE                                         │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  User currentUser                                               │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  bool isLoading                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String errorMessage                                            │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           METHODS                                       │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<bool> login(String email, String password)              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<bool> register(String name, String email, String password)│  │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<void> logout()                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<bool> resetPassword(String email)                       │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<bool> verifyEmail(String code)                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

## Authentication Data Layer

### User Model
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           USER MODEL                                    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           PROPERTIES                                    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String id                                                      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String name                                                    │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String email                                                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String profileImageUrl                                         │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  bool isEmailVerified                                           │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  DateTime createdAt                                             │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           METHODS                                       │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  factory User.fromJson(Map<String, dynamic> json)               │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Map<String, dynamic> toJson()                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

## Authentication Flow

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│             │     │             │     │             │     │             │
│  AuthScreen │────▶│ LoginScreen │────▶│AuthProvider │────▶│ Homepage    │
│             │     │             │     │   login()   │     │             │
│             │     │             │     │             │     │             │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
      │
      │
      ▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│             │     │             │     │             │     │             │
│ AuthScreen  │────▶│RegisterScreen────▶│AuthProvider │────▶│Verification │
│             │     │             │     │ register()  │     │   Screen    │
│             │     │             │     │             │     │             │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                                                                   │
                                                                   │
                                                                   ▼
                                                            ┌─────────────┐
                                                            │             │
                                                            │  Homepage   │
                                                            │             │
                                                            │             │
                                                            └─────────────┘
```

## Supabase Authentication Implementation

The authentication system uses Supabase Authentication:

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       SUPABASE AUTHENTICATION                           │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                ┌───────────────────┼───────────────────┐
                │                   │                   │
                ▼                   ▼                   ▼
┌───────────────────────┐ ┌───────────────────┐ ┌───────────────────────┐
│  EMAIL/PASSWORD AUTH  │ │  SOCIAL AUTH      │ │  PHONE AUTH           │
│                       │ │                   │ │                        │
│  - Sign up            │ │  - Google         │ │  - SMS verification    │
│  - Sign in            │ │  - Apple          │ │  - Phone number login  │
│  - Email verification │ │                   │ │                        │
│  - Password reset     │ │                   │ │                        │
└───────────────────────┘ └───────────────────┘ └───────────────────────┘
```

## Authentication Widget Dependencies

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       AUTHENTICATION WIDGETS                            │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           CUSTOM WIDGETS                                │
│                                                                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │ AuthButton  │  │AuthTextField│  │AuthTitleWidget│ │VerificationCode│ │
│  │             │  │             │  │              │  │    Input     │  │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```
