# Budget Management Component Diagram

This document provides a detailed breakdown of the budget management components in the Eventati Book application.

## Budget Management Components Overview

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       BUDGET MANAGEMENT SYSTEM                          │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                ┌───────────────────┼───────────────────┐
                │                   │                   │
                ▼                   ▼                   ▼
┌───────────────────────┐ ┌───────────────────┐ ┌───────────────────────┐
│     UI COMPONENTS     │ │  STATE MANAGEMENT │ │     DATA LAYER        │
│                       │ │                   │ │                        │
│  ┌─────────────────┐  │ │ ┌─────────────┐   │ │  ┌─────────────────┐  │
│  │BudgetOverview   │  │ │ │BudgetProvider│  │ │  │ BudgetItem      │  │
│  │Screen           │  │ │ └──────┬──────┘   │ │  │ Model           │  │
│  └────────┬────────┘  │ │        │          │ │  └────────┬────────┘  │
│           │           │ │        │          │ │           │           │
│  ┌────────▼────────┐  │ │        │          │ │  ┌────────▼────────┐  │
│  │BudgetDetails    │──┼─┼────────┼──────────┼─┼──┤ TempDB/Firebase │  │
│  │Screen           │  │ │        │          │ │  └────────┬────────┘  │
│  └────────┬────────┘  │ │        │          │ │           │           │
│           │           │ │        │          │ │           │           │
│  ┌────────▼────────┐  │ │        │          │ │           │           │
│  │BudgetItemForm   │──┼─┼────────┘          │ │           │           │
│  │Screen           │  │ │                   │ │           │           │
│  └─────────────────┘  │ │                   │ │           │           │
│                       │ │                   │ │           │           │
└───────────────────────┘ └───────────────────┘ └───────────────────────┘
```

## Budget UI Components

### BudgetOverviewScreen
```
┌─────────────────────────────────────────────────────────────────────────┐
│                       BUDGET OVERVIEW SCREEN                            │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           HEADER                                        │
│                                                                         │
│  ┌─────────────┐  ┌─────────────────────────────────┐  ┌─────────────┐  │
│  │  Back       │  │  Budget Overview                │  │  Add        │  │
│  │  Button     │  │                                 │  │  Button     │  │
│  └─────────────┘  └─────────────────────────────────┘  └─────────────┘  │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           BUDGET SUMMARY                                │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Total Budget: $25,000                                          │    │
│  │  Spent: $15,000                                                 │    │
│  │  Remaining: $10,000                                             │    │
│  │                                                                 │    │
│  │  [Progress Bar: 60% of budget used]                             │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           CATEGORY BREAKDOWN                            │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  CATEGORY CARD                                                  │    │
│  │                                                                 │    │
│  │  Category: Venue                                               │    │
│  │  Budget: $10,000                                               │    │
│  │  Spent: $8,000                                                 │    │
│  │  Remaining: $2,000                                             │    │
│  │                                                                 │    │
│  │  [Progress Bar: 80% of category budget used]                    │    │
│  │                                                                 │    │
│  │  [View Details Button]                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  CATEGORY CARD                                                  │    │
│  │                                                                 │    │
│  │  Category: Catering                                            │    │
│  │  Budget: $8,000                                                │    │
│  │  Spent: $5,000                                                 │    │
│  │  Remaining: $3,000                                             │    │
│  │                                                                 │    │
│  │  [Progress Bar: 62.5% of category budget used]                  │    │
│  │                                                                 │    │
│  │  [View Details Button]                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           ACTION BUTTONS                                │
│                                                                         │
│  ┌─────────────────────────────────────────────────┐  ┌─────────────┐  │
│  │  View All Items                                 │  │  Add Item   │  │
│  │                                                 │  │             │  │
│  └─────────────────────────────────────────────────┘  └─────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
```

### BudgetDetailsScreen
```
┌─────────────────────────────────────────────────────────────────────────┐
│                       BUDGET DETAILS SCREEN                             │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           HEADER                                        │
│                                                                         │
│  ┌─────────────┐  ┌─────────────────────────────────┐  ┌─────────────┐  │
│  │  Back       │  │  Category Name                  │  │  Add        │  │
│  │  Button     │  │  (e.g., "Venue")                │  │  Button     │  │
│  └─────────────┘  └─────────────────────────────────┘  └─────────────┘  │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           CATEGORY SUMMARY                              │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Budget: $10,000                                                │    │
│  │  Spent: $8,000                                                  │    │
│  │  Remaining: $2,000                                              │    │
│  │                                                                 │    │
│  │  [Progress Bar: 80% of category budget used]                    │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           BUDGET ITEMS LIST                             │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  BUDGET ITEM                                                    │    │
│  │                                                                 │    │
│  │  Item: Main Venue Rental                                       │    │
│  │  Estimated: $7,500                                             │    │
│  │  Actual: $7,000                                                │    │
│  │  Paid: $7,000                                                  │    │
│  │  Due Date: May 1, 2023                                         │    │
│  │  Status: Paid                                                  │    │
│  │                                                                 │    │
│  │  [Edit Button]                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  BUDGET ITEM                                                    │    │
│  │                                                                 │    │
│  │  Item: Additional Venue Services                               │    │
│  │  Estimated: $1,500                                             │    │
│  │  Actual: $1,000                                                │    │
│  │  Paid: $1,000                                                  │    │
│  │  Due Date: May 1, 2023                                         │    │
│  │  Status: Paid                                                  │    │
│  │                                                                 │    │
│  │  [Edit Button]                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

### BudgetItemFormScreen
```
┌─────────────────────────────────────────────────────────────────────────┐
│                       BUDGET ITEM FORM SCREEN                           │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           HEADER                                        │
│                                                                         │
│  ┌─────────────┐  ┌─────────────────────────────────┐                   │
│  │  Back       │  │  Add/Edit Budget Item           │                   │
│  │  Button     │  │                                 │                   │
│  └─────────────┘  └─────────────────────────────────┘                   │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           FORM FIELDS                                   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Category Dropdown                                              │    │
│  │  (Venue, Catering, Photography, etc.)                           │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Item Name TextField                                            │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Estimated Cost TextField                                       │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Actual Cost TextField                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Amount Paid TextField                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Due Date Picker                                                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Notes TextField                                                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Is Booked Checkbox                                             │    │
│  │  (Link to a booking if applicable)                              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           ACTION BUTTONS                                │
│                                                                         │
│  ┌─────────────────────────────────────────────────┐  ┌─────────────┐  │
│  │  Cancel                                         │  │  Save       │  │
│  │                                                 │  │             │  │
│  └─────────────────────────────────────────────────┘  └─────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
```

## Budget State Management

### BudgetProvider
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           BUDGET PROVIDER                               │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           STATE                                         │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  List<BudgetItem> budgetItems                                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double totalBudget                                             │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  bool isLoading                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String errorMessage                                            │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           COMPUTED PROPERTIES                           │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double get totalSpent                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double get totalRemaining                                      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Map<String, List<BudgetItem>> get itemsByCategory              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Map<String, double> get spentByCategory                        │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Map<String, double> get budgetByCategory                       │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           METHODS                                       │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<void> loadBudgetItems(String eventId)                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<void> addBudgetItem(BudgetItem item)                    │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<void> updateBudgetItem(BudgetItem item)                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<void> deleteBudgetItem(String itemId)                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Future<void> updateTotalBudget(double amount)                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

## Budget Data Layer

### BudgetItem Model
```
┌─────────────────────────────────────────────────────────────────────────┐
│                           BUDGET ITEM MODEL                             │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           PROPERTIES                                    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String id                                                      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String eventId                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String category                                                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String name                                                    │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double estimatedCost                                           │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double actualCost                                              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double paid                                                    │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  DateTime dueDate                                               │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String notes                                                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  bool isBooked                                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String bookingId                                               │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           COMPUTED PROPERTIES                           │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  double get remaining => actualCost - paid                      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  String get status                                              │    │
│  │  (Returns "Paid", "Partially Paid", or "Unpaid")                │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           METHODS                                       │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  factory BudgetItem.fromJson(Map<String, dynamic> json)         │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Map<String, dynamic> toJson()                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

## Budget Management Flow

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│             │     │             │     │             │
│  Budget     │────▶│BudgetProvider────▶│  Budget     │
│  Overview   │     │ loadBudget  │     │  Details    │
│  Screen     │     │  Items()    │     │  Screen     │
│             │     │             │     │             │
└─────────────┘     └─────────────┘     └─────────────┘
      │                                        │
      │                                        │
      ▼                                        ▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│             │     │             │     │             │
│  Add Budget │────▶│BudgetProvider────▶│  Budget     │
│  Item Screen│     │ addBudget   │     │  Overview   │
│             │     │  Item()     │     │  Screen     │
│             │     │             │     │             │
└─────────────┘     └─────────────┘     └─────────────┘
```

## Integration with Other Features

### Integration with Event Wizard
```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│             │     │             │     │             │
│  Event      │────▶│  Wizard     │────▶│  Budget     │
│  Wizard     │     │  Connection │     │  Provider   │
│  (Budget    │     │  Service    │     │             │
│  Estimation)│     │             │     │             │
└─────────────┘     └─────────────┘     └─────────────┘
```

### Integration with Booking System
```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│             │     │             │     │             │
│  Booking    │────▶│  Booking    │────▶│  Budget     │
│  Form       │     │  Provider   │     │  Provider   │
│  Screen     │     │             │     │             │
│             │     │             │     │             │
└─────────────┘     └─────────────┘     └─────────────┘
```

## Budget Widget Dependencies

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       BUDGET WIDGETS                                    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           CUSTOM WIDGETS                                │
│                                                                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │ CategoryCard│  │ BudgetItem  │  │ProgressBar  │  │ PriceInput  │    │
│  │             │  │   Card      │  │             │  │             │    │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```
